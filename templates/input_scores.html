{% extends 'base.html' %}

{% block content %}
<div class="card shadow-sm p-4 mx-auto" style="max-width: 600px;">
    <h2 class="text-center mb-4">Input Examiner Scores</h2>

    <form method="POST">
        <!-- Examiner Selection -->
        <div class="mb-3">
            <label for="examiner-select" class="form-label">Examiner Name</label>
            <select class="form-select" id="examiner-select" name="name" required>
                <option value="">-- Select Examiner --</option>
                {% for e in examiners %}
                    <option value="{{ e['Name'] }}" data-id="{{ e['Id'] }}">
                        {{ e['Name'] }}
                    </option>
                {% endfor %}
            </select>
            <input type="hidden" name="examinerid" id="examiner-id">
        </div>

        <!-- Exam Selection -->
        <div class="mb-3">
            <label for="exam-select" class="form-label">Exam</label>
            <select class="form-select" id="exam-select" name="exam" required>
                <option value="">-- Select Exam --</option>
                {% for ex in exams %}
                    <option value="{{ ex['Name'] }}">{{ ex['Name'] }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Year -->
        <div class="mb-3">
            <label for="year" class="form-label">Year</label>
            <input type="number" class="form-control" id="year" name="year" value="{{ current_year }}" min="2000" max="2100" required>
        </div>

        <!-- Score -->
        <div class="mb-3">
            <label for="score" class="form-label">Score</label>
            <input type="number" class="form-control" id="score" name="score" min="0" max="100" required>
        </div>

        <!-- Submit -->
        <div class="d-grid">
            <button type="submit" class="btn btn-success btn-lg">Submit</button>
        </div>
    </form>
</div>

<script>
    // Set hidden examiner ID
    document.getElementById('examiner-select').addEventListener('change', function(){
        const selectedOption = this.options[this.selectedIndex];
        document.getElementById('examiner-id').value = selectedOption.dataset.id;
    });
</script>
{% endblock %}